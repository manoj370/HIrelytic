<simple-notifications></simple-notifications>
<ngx-spinner bdOpacity="0.9" size="medium" color="#fff" type="line-scale" fullScreen="true">
</ngx-spinner>
<div class="row">
    <div class="col-md-12">
        <div class="card-header">
            <label i18n="@@userListTitle">
                <h4> Add Client Details</h4>
            </label>
            <ul class="jobsearch">
                <!-- <li>
                    <div class="float-right">
                        <a routerLink="/addClient"> <button type="button" class="btn btn-success ">Add
                                Client</button></a>
                    </div>
                </li> -->
                <li>
                    <span style="font-size: 25px; color: #ff7000;cursor: pointer;"> <i class="fas fa-arrow-circle-left" title="Back To Client List" (click)="backToClients()"></i></span>


                </li>

            </ul>
        </div>
    </div>
</div>
<div class="ibox">
    <!-- <div class="card-header" style="font-size:20px;color:blue;cursor: pointer;">
        Add Client
        <div class="float-right">
            <button type="button" class="btn btn-success" id="btnback" (click)="backToClients()"><i
                    class="fa fa-angle-double-left"></i>&nbsp;Back</button>
        </div>
    </div> -->
    <div class="ibox-body">
        <form [formGroup]="clientCreationForm">
            <div class="row">
                <div class="col-sm-12 form-group">
                    <label>Client Name *</label>
                    <input id="clientName" class="form-control input-rounded" type="text" maxlength="75" (blur)="checkClientName($event.target.value)" placeholder="Client Name " formControlName="clientName">
                    <span *ngIf="clientCreationForm.controls['clientName'].hasError('required') && clientCreationForm.controls['clientName'].touched" class="failed-validation">
                        Client Name Required
                    </span>

                    <span *ngIf="clientCreationForm.controls['clientName'].hasError('pattern')" class="failed-validation">
                        Invalid Client Name
                    </span>
                </div>
            </div>
            <br>

            <h4>Client Details</h4>
            <div class="row">
                <div class="col-sm-6 form-group">
                    <label>First Name *</label>
                    <input type="text" class="form-control input-rounded" (keypress)="this.global.keyPresss($event)" placeholder="First Name" maxlength="75" formControlName="personFirstName" [(ngModel)]="personFirstName">
                    <span *ngIf="clientCreationForm.controls['personFirstName'].hasError('required') && clientCreationForm.controls['personFirstName'].touched" style="color:red" class="failed.validation">
                        First Name Required
                    </span>
                    <span *ngIf="clientCreationForm.controls['personFirstName'].hasError('pattern')" class="failed-validation">
                        First Name Should be in alphabets Only
                    </span>
                    <span *ngIf="clientCreationForm.controls['personFirstName'].hasError('minlength')" class="failed-validation">
                        First Name Should not be less than 3 Characters
                    </span>

                </div>
                <div class="col-sm-6 form-group">
                    <label>Last Name *</label>
                    <input type="text" class="form-control input-rounded" (keypress)="this.global.keyPresss($event)" placeholder="Last Name" maxlength="75" formControlName="personLastName" [(ngModel)]="personLastName">
                    <span *ngIf="clientCreationForm.controls['personLastName'].hasError('required') && clientCreationForm.controls['personLastName'].touched" style="color:red" class="failed.validation">
                        Last Name Required
                    </span>
                    <span *ngIf="clientCreationForm.controls['personLastName'].hasError('pattern')" class="failed-validation">
                        Last Name Should be in alphabets Only
                    </span>
                    <span *ngIf="clientCreationForm.controls['personLastName'].hasError('minlength')" class="failed-validation">
                        Last Name Should not be less than 3 Characters
                    </span>
                    <span *ngIf="clientCreationForm.controls['personLastName'].hasError('maxlength')" class="failed-validation">
                        Last Name Should not be greater than 75 Characters
                    </span>
                </div>
            </div>




            <div class="row">
                <div class="col-sm-6">
                    <label>Contact Number *</label>
                    <input type="text" class="form-control input-rounded" placeholder="Contact Number" formControlName="contactNumber" (keypress)="this.global.keyPress($event)" maxlength="10" [(ngModel)]="contactNumber">
                    <span *ngIf="clientCreationForm.controls['contactNumber'].hasError('required') && clientCreationForm.controls['contactNumber'].touched" style="color:red" class="failed.validation">
                        Contact Number Required
                    </span>
                    <span *ngIf="clientCreationForm.controls['contactNumber'].hasError('pattern')" class="failed-validation">
                        Contact Number Should be in Numbers Only
                    </span>
                    <span *ngIf="clientCreationForm.controls['contactNumber'].hasError('minlength')" class="failed-validation">
                        Contact Number Must be 10 Digits
                    </span>
                    <span *ngIf="clientCreationForm.controls['contactNumber'].hasError('maxlength')" class="failed-validation">
                        Contact Number Should be in greather than 10 Characters
                    </span>
                </div>
                <div class="col-sm-6">
                    <label>Email Id *</label>
                    <input type="text" id="emailId" class="form-control input-rounded" placeholder="Email Id" formControlName="emailId" maxlength="250" [(ngModel)]="emailId">
                    <span *ngIf="clientCreationForm.controls['emailId'].hasError('pattern')" class="failed-validation">
                        Email Id Should be in Specific Pattern
                    </span>
                    <span *ngIf="clientCreationForm.controls['emailId'].hasError('required') && clientCreationForm.controls['emailId'].touched" style="color:red" class="failed.validation">
                        Email Id Required
                    </span>
                </div>
            </div><br>
            <div class="row">
                <div class="col-sm-6">
                    <label>Designation *</label>
                    <input type="text" class="form-control input-rounded" (keypress)="this.global.keyPresss($event)" placeholder="Designation" maxlength="75" formControlName="designation" [(ngModel)]="designation">
                    <span *ngIf="clientCreationForm.controls['designation'].hasError('required') && clientCreationForm.controls['designation'].touched" style="color:red" class="failed.validation">
                        Designation Required
                    </span>
                    <span *ngIf="clientCreationForm.controls['designation'].hasError('pattern')" class="failed-validation">
                        Designation Name Should be in alphabets Only
                    </span>
                    <span *ngIf="clientCreationForm.controls['designation'].hasError('minlength')" class="failed-validation">
                        Designation Name Should not be less than 3 Characters
                    </span>
                    <span *ngIf="clientCreationForm.controls['designation'].hasError('maxlength')" class="failed-validation">
                        Designation Name Should not be in greather than 25 Characters
                    </span>
                </div>
            </div>
            <br>
            <div formArrayName="addresses">
                <!-- 
                <button class="btn btn-primary" type="button">Add New
                    Address</button> -->

                <div *ngFor="let address of addresses.controls; let i=index" [formGroupName]="i">
                    <h4>Address #{{i + 1}}
                        <span class="plusIcon"> <i class="fas fa-plus-circle" title="Add Address" (click)="addAdresses()" *ngIf="i===0"></i></span>
                        <span class="minusIcon"><i class="fas fa-minus-circle" title="Remove Address" (click)="removeAddress(i)" *ngIf="i>0"></i></span>
                    </h4>

                    <div class="row">
                        <div class="col-sm-12 form-group">
                            <label>Address Line 1 * </label>
                            <input class="form-control input-rounded" formControlName="line1" placeholder="Address Line 1" maxlength="250">

                            <div *ngIf="address.get('line1').hasError('required')&&address.get('line1').touched" style="color:red">
                                Address Line 1 Required
                            </div>
                            <div *ngIf="address.get('line1').hasError('maxlength')" style="color:red">
                                Address Line 1 max length should be 250
                            </div>
                            <div *ngIf="address.get('line1').hasError('pattern')" class="failed-validation">
                                Invalid Address Line 1
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12 form-group">
                            <label class="center-block">Address Line 2 </label>
                            <input class="form-control input-rounded" formControlName="line2" placeholder="Address Line 2">

                            <div *ngIf="address.get('line2').hasError('maxlength')" style="color:red">
                                Address Line 2 max length should be 250
                            </div>
                            <div *ngIf="address.get('line2').hasError('pattern')" class="failed-validation">
                                Invalid Address Line 2
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label for="sel1">Country *</label>
                            <select class="form-control input-rounded" id="Country" (change)="onCountryChange($event.target.value)" formControlName="country">
                                <option disabled value="">Select Country </option>
                                <option *ngFor="let country of countryList" [value]="country.countryId">
                                    {{country.countryName}}
                                </option>
                            </select>
                            <div *ngIf="address.get('country').hasError('required')&&address.get('country').touched" style="color:red">
                                Country Required
                            </div>
                        </div>
                        <div class="col-sm-6 form-group">
                            <label for="sel1">State *</label>
                            <select formControlName="state" class="form-control input-rounded" id="addLocState">

                                <option disabled value="">Select State
                                </option>
                                <option *ngFor="let states of stateList" [value]="states">
                                    {{states}}
                                </option>
                            </select>
                            <div *ngIf="address.get('state').hasError('required')&&address.get('state').touched" style="color:red">
                                State Required
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>City * </label>
                            <input class="form-control input-rounded" formControlName="city" placeholder="City" maxlength="250" (keypress)="keyPress($event)">

                            <div *ngIf="address.get('city').hasError('required')&&address.get('city').touched" style="color:red">
                                City Required
                            </div>

                        </div>
                        <div class="col-sm-6  form-group">
                            <label>Land Mark</label>
                            <input class="form-control input-rounded" formControlName="landmark" placeholder="Land Mark">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6  form-group ">
                            <label>Zip Code * </label>
                            <input class="form-control input-rounded" formControlName="zipCode" placeholder="Zip Code" maxlength="6" (keypress)="keyPresss($event)">

                            <div *ngIf="address.get('zipCode').hasError('required')&&address.get('zipCode').touched" style="color:red">
                                Zip Code Required
                            </div>
                            <div *ngIf="address.get('zipCode').hasError('pattern')" class="failed-validation">
                                Invalid Zip Code
                            </div>
                        </div>
                    </div>
                    <br>
                </div>
            </div>
            <div class="btn-group pull-right">
                <button type="button" class="btn btn-info" (click)="onSubmit()" [disabled]="!clientCreationForm.valid" data-toggle="modal" data-target="#myModal">Add</button> &nbsp;&nbsp;
            </div>
        </form>
    </div>
</div>